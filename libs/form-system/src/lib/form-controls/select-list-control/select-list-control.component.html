<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{control.label | translate}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="column">
        <div class="filter-input" fxFlex="nogrow">
          <rxap-text-filter #textFilter [data]="control.unselectedOptions"></rxap-text-filter>
        </div>
        <mat-selection-list (selectionChange)="model = $event.option.selected ? $event.option.value : null" fxFlex="nogrow">
          <mat-list-item *ngIf="(textFilter.isEmpty$ | async) && control.selectedOptions.length === 0">
            {{'RXAP.FORM_SYSTEM.FORM_CONTROLS.SELECT_LIST.EMPTY' | translate}}
          </mat-list-item>
          <mat-list-option
            *ngFor="let option of control.selectedOptions; trackBy: control.trackBy"
            [checkboxPosition]="control.checkboxPosition"
            [disabled]="option.disabled"
            [selected]="true"
            [value]="option.value"
          >
            <rxap-icon-button
              (buttonClick)="control.onPrefixButtonClick(option.value)"
              *ngIf="icon"
              [icon]="icon"
              matListIcon>
            </rxap-icon-button>
            {{ option.display | translate }}
          </mat-list-option>
          <mat-divider *ngIf="control.selectedOptions.length" inset></mat-divider>
          <mat-list-option
            *ngFor="let option of (paginator.pagedData$ | async); trackBy: control.trackBy"
            [checkboxPosition]="control.checkboxPosition"
            [disabled]="option.disabled"
            [selected]="false"
            [value]="option.value"
          >
            <rxap-icon-button
              (buttonClick)="control.onPrefixButtonClick(option.value)"
              *ngIf="icon"
              [icon]="icon"
              matListIcon>
            </rxap-icon-button>
            {{ option.display | translate }}
          </mat-list-option>
        </mat-selection-list>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <rxap-paginator #paginator [data]="textFilter.filteredData$" fxFlex="grow"></rxap-paginator>
    </mat-card-footer>
  </mat-card>
</div>
