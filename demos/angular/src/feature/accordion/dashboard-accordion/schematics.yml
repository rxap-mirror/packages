- package: "@rxap/schematic-angular"
  name: accordion-component
  options:
    name: dashboard
    backend: nestjs
    multiple: true
    header:
      property:
        name: name
    persistent:
      property:
        name: uuid
    identifier:
      source: route
      property:
        name: uuid
    itemList:
      - name: general-information
        kind: switch
        switch:
          property:
            name: dashboardType
            type: number
          defaultCase:
            itemList:
              - kind: data-grid
                name: dashboard
                title: Allgemeine Informationen
                dataGrid:
                  mode: form
                  itemList:
                    - name: name
                      kind: input
                    - name: location
                      #kind: autocomplete-table-select
                      kind: table-select
                      toValue:
                        property:
                          name: uuid
                      columnList:
                        - name: name
                          hasFilter: true
                      upstream:
                        kind: open-api
                        operationId: company-gui-controller-getByFilter@legacy
                        mapper:
                          pageIndex: page
                          pageSize: size
                          sortBy: sort
                          sortDirection: order
                          list: entities
                          total: maxCount
                          filter:
                            eq: ':'
                            join: ';'
                    - name: link
                      kind: input
                      inputType: url
                    - name: company
                      type: string
                      isReadonly: true
                    - name: dashboardType
                      header: Typ
                      type: number
                      isReadonly: true
          case:
            - test: 2
              itemList:
                - kind: data-grid
                  name: cloud-dashboard
                  title: Allgemeine Informationen
                  dataGrid:
                    mode: form
                    itemList:
                      - name: name
                        kind: input
                      - name: company
                        type: string
                        isReadonly: true
                      - name: dashboardType
                        header: Typ
                        type: number
                        isReadonly: true
      - name: layout
        kind: switch
        permission: dashboard.layout.get
        switch:
          property:
            name: dashboardType
            type: number
          case:
            - test: 2
              itemList:
                - name: cloud-dashboard
                  title: Layouts
      - name: reference
        kind: tree-table
        title: Zuordnung
        table:
          propertyList:
            - name: uuid
          columnList:
            - name: referenced
              type: boolean
              filterControl:
                name: referenced
                kind: checkbox
            - name: name
              filterControl:
                name: name
                kind: input
              type: string
            - name: type
              type: string
