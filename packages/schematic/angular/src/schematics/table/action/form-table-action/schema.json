{
  "$schema": "http://json-schema.org/schema",
  "$id": "form-table-action",
  "type": "object",
  "properties": {
    "tableName": {
      "alias": "table",
      "type": "string",
      "description": "The name of the table action"
    },
    "type": {
      "alias": "actionType",
      "type": "string",
      "description": "The table action type string",
      "x-prompt": "Enter the table action type string?"
    },
    "project": {
      "type": "string",
      "description": "The target project where the table action should be added."
    },
    "feature": {
      "type": "string",
      "description": "The feature name where the table action should be added.",
      "x-prompt": "To which feature should the table action be added?"
    },
    "backend": {
      "type": "string",
      "description": "The backend that should be used to handel data",
      "enum": [
        "none",
        "local",
        "nestjs",
        "open-api"
      ],
      "default": "none"
    },
    "shared": {
      "type": "boolean",
      "description": "Whether the table action is shared across applications",
      "default": false
    },
    "refresh": {
      "type": "boolean",
      "description": "Whether the table action should refresh the table after execution",
      "default": false
    },
    "confirm": {
      "type": "boolean",
      "description": "Whether the table action should confirm before execution",
      "default": false
    },
    "tooltip": {
      "type": "string",
      "description": "The tooltip for the table action"
    },
    "errorMessage": {
      "type": "string",
      "description": "The error message for the table action"
    },
    "successMessage": {
      "type": "string",
      "description": "The success message for the table action"
    },
    "checkFunction": {
      "type": "string",
      "description": "The check function for the table action"
    },
    "priority": {
      "type": "number",
      "description": "The priority of the table action"
    },
    "directory": {
      "type": "string",
      "description": "A directory name or absolute path for the table action. relative to the feature base path"
    },
    "nestModule": {
      "type": "string",
      "description": "The module name for the table nest operations"
    },
    "overwrite": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      ],
      "description": "Overwrite existing files",
      "default": false
    },
    "context": {
      "type": "string",
      "description": "The context use to generate proper names for class, files, etc"
    },
    "formInitial": {
      "type": "object",
      "description": "The mapping from the row object to the form initial object"
    },
    "formComponent": {
      "type": "string"
    },
    "customComponent": {
      "type": "boolean",
      "default": false,
      "description": "If true the schematic will not coerce the form component"
    },
    "loadFrom": {
      "type": "object",
      "properties": {
        "operationId": {
          "type": "string"
        },
        "scope": {
          "type": "string",
          "description": "The scope of package for the openapi classes"
        },
        "body": {
          "oneOf": [
            {
              "type": "boolean",
              "description": "Pass the full row as body for the operation request"
            },
            {
              "type": "object",
              "description": "Mapping of table columns to body properties - [request property]: [table column]",
              "additionalProperties": true
            }
          ]
        },
        "parameters": {
          "oneOf": [
            {
              "type": "boolean",
              "description": "Pass the full row as parameters for the operation request"
            },
            {
              "type": "object",
              "description": "Mapping of table columns to parameters properties - [request property]: [table column]",
              "additionalProperties": true
            }
          ]
        }
      }
    },
    "options": {
      "type": "object",
      "properties": {
        "controlList": {
          "alias": "control",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "state": {
                "type": "string",
                "description": "The initial state of the control"
              },
              "isRequired": {
                "type": "boolean",
                "description": "Whether the control value is required",
                "default": false
              },
              "validatorList": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "name"
            ]
          }
        }
      },
      "additionalProperties": true
    }
  },
  "required": [
    "type",
    "project",
    "feature"
  ]
}
